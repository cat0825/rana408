---
{"dg-publish":true,"dg-permalink":"/408/STDM的异步你真的知道是什么的异步吗🤔","permalink":"/408/STDM的异步你真的知道是什么的异步吗🤔/"}
---


### 一、原理

要彻底理解STDM，最好的方法就是将它与我们熟悉的（同步）时分复用（TDM）**进行对比。

#### 1. 回顾：传统的TDM（同步时分复用）

想象一个有4条车道（用户A, B, C, D）的收费站，要汇入一条主干道。TDM的规则是：

- **严格轮流**：主干道的时间被切分成一个个“帧”，每个帧里有4个固定的“时隙”，分别**永久预留**给A, B, C, D。
    
- **不管你来不来，位置都给你留着**：即使某一时刻C车道没有车，C的时隙也会在主干道上**空着跑过去**。
    
- **结果**：信道利用率低，存在大量浪费。
    

```
TDM 帧结构:
| A1 | B1 | C1 | D1 | A2 | B2 | C2 | D2 | ...
^    ^    ^    ^
时隙1  时隙2  时隙3  时隙4 (固定分配)

如果C没有数据，则C1时隙为空，造成浪费。
```

#### 2. 登场：STDM（统计时分复用）

STDM则像一个**智能的动态调度系统**，它的规则是：

- **按需服务，先到先得**：不再为每个用户预留固定时隙。而是谁有数据要发，就立刻把它装入下一个可用的时隙。
    
- **插队抢跑，提高效率**：如果C没有数据，系统会直接跳过C，让后面有数据的用户（比如D或下一个A）立刻“插队”使用这个时隙。
    
- **结果**：信道几乎永远是“满载”的，利用率极高。
    

#### 3. STDM是如何实现的？

STDM的实现依赖于一个核心设备——**统计复用器（Statistical Multiplexer）**，其实现过程如下：

1. **设置缓冲区**：统计复用器为每条输入线路都提供一个缓冲区，用于暂存用户发来的数据。
    
2. **动态扫描**：复用器不断地循环扫描各条输入线路的缓冲区。
    
3. **按需组帧**：
    
    - 一旦发现某个用户的缓冲区中有数据，就立即取出这些数据。
        
    - **关键一步**：为取出的数据块附加上一个**地址信息**（或称为“标志”），指明这个数据块是属于哪个用户的。
        
    - 将“地址+数据”作为一个整体，放入一个STDM帧中。
        
4. **发送帧**：将组装好的STDM帧发送到高速线路上。
    

为什么必须加地址信息？

因为在STDM中，时隙的位置不再与用户身份绑定。接收端收到一个数据块时，它无法像TDM那样通过“数位置”（比如第3个时隙就是C的）来判断数据来源。因此，必须在数据中明确地“贴上标签”，告诉接收端“我是A发来的”、“我是D发来的”。

### 二、图示说明

**STDM工作原理图**

```
      +-----------+
A --> | Buffer A  | --\
      +-----------+    \
      +-----------+     \   +-------------------+   高速线路
B --> | Buffer B  | ------->| 统计复用器        |------------> | D1 | C1 | B1 | A1 | ...
      +-----------+     /   | (扫描、加地址、组帧)|
      +-----------+    /    +-------------------+
C --> | Buffer C  | --/
      +-----------+
      +-----------+
D --> | Buffer D  | --/
      +-----------+

假设某一时刻，A, B, C, D都有数据，则STDM帧可能是 | A1 | B1 | C1 | D1 |
假设下一时刻，只有A和D有数据，则STDM帧可能是 | A2 | D2 | A3 | D3 | (B和C的时隙被动态利用了)
```

- **注意**：这里的`A1`, `B1`等都代表一个包含**地址和数据**的完整数据单元。

|特性|（同步）TDM|统计时分复用 (STDM)|
|---|---|---|
|**分配方式**|**静态分配**，预留固定时隙|**动态分配**，按需分配时隙|
|**信道利用率**|低，有数据空闲时浪费严重|**高**，信道利用率得到极大提升|
|**帧结构**|时隙位置隐含地址，无额外开销|**必须包含地址字段**，有额外开销|
|**总速率关系**|输出线路速率 ≥ 所有输入线路速率之和|输出线路速率可以 < 所有输入线路速率之和|
|**是否拥塞**|永远不会拥塞|当瞬时输入速率 > 输出速率时，**可能因缓冲区满而拥塞丢包**|
### 三、易错点

- **STDM的开销**：STDM的高效率是有代价的，这个代价就是每个数据单元都必须增加地址信息，这本身是一种**开销（Overhead）**。当传输的数据块本身很小时，地址信息的占比就会变大，从而降低了实际的净荷效率。
    
- **拥塞问题**：STDM的设计基于一个“统计”假设，即所有用户不太可能在同一时刻都达到峰值速率。但万一这个小概率事件发生了呢？如果所有用户同时以最大速率发送数据，其总和超过了输出线路的承载能力，统计复用器的缓冲区就会被迅速填满，最终导致**数据丢失（丢包）**。这是STDM为了追求高效率而必须承担的风险。
    
- **名称混淆**：“异步时分复用”这个别名容易让人与物理层的“异步传输”（使用起始/停止位）混淆。一定要分清：STDM的“异步”指的是**时隙分配的非同步性**，而不是比特传输的同步方式。
